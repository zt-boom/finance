<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>基金每日预估收益 v1.0</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="./style.css">
</head>
<body>
<div class="app">
<header class="app-header">
<div class="title-row">
  <h1>基金每日预估收益 v1.0</h1>
  <button id="theme-toggle-btn" class="icon-button" title="切换主题">
    <svg class="btn-icon theme-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:block">
      <circle cx="12" cy="12" r="5"></circle>
      <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
    </svg>
    <svg class="btn-icon theme-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </button>
</div>
<div class="header-info-row">
  <div class="market-indices" id="market-indices">
    <!-- Indices will be injected here -->
    <span class="index-item loading">加载中...</span>
  </div>
  <a href="https://52etf.site/" target="_blank" class="text-link-btn" title="访问 52etf.site" style="font-size: 13px; margin-left: 8px;">大盘概况</a>
  <div class="date-row">
    <span id="current-date"></span>
    <span id="trading-status" class="trading-status"></span>
  </div>
</div>
</header>
<main class="app-main">
<section class="card">
<div class="card-header">
<div class="header-title-group">
            <h2>持仓明细</h2>
          </div>
          <div class="card-header-actions">
            <button id="add-fund-btn" class="primary-button">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
              <span>添加</span>
            </button>
            <div class="header-actions-divider"></div>
            <button id="import-btn" class="secondary-button" title="导入配置">
    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
    </svg>
    <span>导入</span>
  </button>
  <button id="export-config-btn" class="secondary-button" title="导出配置">
    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
    </svg>
    <span>导出</span>
  </button>

<button id="fetch-percent-btn" class="secondary-button">
  <svg class="btn-icon refresh-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M23 4v6h-6M1 20v-6h6"/>
    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
  </svg>
  <span class="btn-text">刷新</span><span id="fetch-btn-status"></span>
</button>
</div>
</div>
<div class="card-body">
<div id="trend-chart-container" class="chart-container"></div>
<div class="table-wrapper">
<table class="fund-table">
<thead>
<tr>
<th class="index-col">序号</th>
<th>名称</th>
            <th>ZFB持仓(元)</th>
            <th>证券持仓(元)</th>
            <th class="sortable" data-sort="amount"><span class="th-label">持仓金额(元)</span><span class="sort-state"></span></th>
            <th>ZFB收益(元)</th>
<th>证券收益(元)</th>
<th class="sortable" data-sort="percent"><span class="th-label">预估涨跌(%)</span><span class="sort-state"></span></th>
            <th class="sortable" data-sort="profit">
              <div class="th-content-wrapper">
                <span class="th-label">预估收益(元)</span>
                <span class="sort-state"></span>
                <button id="toggle-profit-mode-btn" class="icon-button-small" title="切换当日/累计收益">
                  <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"/>
                    <path d="M14 2v6h6"/>
                    <path d="M3 15h6"/>
                    <path d="M6 12v6"/>
                  </svg>
                </button>
              </div>
            </th>
<th>操作</th>
</tr>
</thead>
<tbody id="fund-table-body"></tbody>
        <tfoot>
          <tr class="summary-row">
            <td colspan="2">合计：</td>
            <td><span id="total-zfb-amount">0.00</span></td>
            <td><span id="total-stock-amount">0.00</span></td>
            <td><span id="total-amount">0.00</span></td>
            <td><span id="total-zfb-profit">0.00</span></td>
            <td><span id="total-stock-profit">0.00</span></td>
            <td><span id="total-percent">0.00%</span></td>
            <td><span id="total-profit">0.00</span></td>
            <td>
              <button id="toggle-privacy-btn" class="icon-button-small" title="显示/隐藏金额" style="margin: 0 auto;">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle class="eye-open" cx="12" cy="12" r="3"></circle>
                  <path class="eye-closed" d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22" style="display: none;"></path>
                </svg>
              </button>
            </td>
          </tr>
        </tfoot>
</table>
</div>
</div>
</section>
</main>
</div>
<div id="add-fund-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>添加基金</h3>
      <button id="close-modal-btn" class="icon-button">
        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="search-box">
        <input type="text" id="fund-search-input" placeholder="输入基金代码或名称搜索（支持拼音）" autofocus>
      </div>
      <div class="search-results" id="search-results-list">
        <!-- Search results will appear here -->
        <div class="empty-state">请输入关键词搜索</div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="selected-count">已选: <span id="selected-count-num">0</span></div>
      <div class="modal-actions">
        <button id="cancel-add-btn" class="secondary-button">取消</button>
        <button id="confirm-add-btn" class="primary-button" disabled>添加选中</button>
      </div>
    </div>
  </div>
</div>
<input type="file" id="import-file-input" accept=".json" style="display: none;">
<script type="module" src="./main.js"></script>
</body>
</html>
